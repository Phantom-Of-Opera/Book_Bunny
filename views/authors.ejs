<%-include("partials/header.ejs") %>
<!-- TODO:Reconfigure the file for authors -->
<div class="container mt-4">
		<div class="mb-3">
			<input
				type="text"
				id="filterBar"
				class="form-control"
				placeholder="Filter your books..."
				onkeyup="filterBooks()" 
			/>
			<!-- TODO:Adapt to authors-->
		</div>



	<div class="row justify-content-start" id="bookList">
		<!-- Save the user id for future use. -->
		<input type="hidden" id="userId" value="<%= locals.userId %>" />
		<!-- TODO: Change loop for authors -->
		<% bookList.forEach(book => { %>
		<div class="col-sm-6 col-md-4 col-lg-3 d-flex align-items-stretch">
			<div class="card text-center mb-3" style="width: 100%">
				<div class="card-body">
					<h5 class="card-title simonetta-black"><%= book.book_title %></h5>
					<% const cover = book.book_cover_id || 'default-cover'; %>
					<!-- TODO: Change maybe to a picture and refer to the url for authors covers -->
					<!-- <img src="//covers.openlibrary.org/a/id/5543033-M.jpg" itemprop="image" class="cover" alt="Photo of J. K. Rowling">  -->
					<img
						<%if ( cover == "NoCover" ) {%>
							src="images/blank_cover.jpeg" <%}else{%>
							src="https://covers.openlibrary.org/b/olid/<%=cover%>-M.jpg"
							<%}%>
						alt="book cover"
						height="200px"
					/>
					<p class="card-text simonetta-regular-italic">
						by <%= book.author_name %>
					</p>
					<!-- TODO: Change the buttons to have just like a "view more" -->
					<button
						type="button"
						class="btn btn-primary bookBtn fontFlex"
						<%= myBooks == false? 'hidden' : '' %>
						data-key="<%= book.id_book %>"
					>
						Select
					</button>
					<button
						type="button"
						class="btn btn-primary addBtn fontFlex"
						<%= locals.hideAdd == true? 'hidden' : '' %>
						data-key="<%= book.id_book %>"
					
					>
						add to My Books
					</button>

				</div>
			</div>
		</div>
		<% }); %>
	</div>
</div>

<%-include("partials/footer.ejs") %>
